--- START OF FILE style.css ---

/* --- 全局与主题样式 (Blackpink 暗黑霓虹主题) --- */
:root {
    /* 核心背景：深邃黑灰 */
    --bg-color: #121212;
    --screen-bg: #000000;
    
    /* 核心主色：热粉色/荧光粉 */
    --primary-color: #ff0055; 
    --primary-gradient: linear-gradient(135deg, #ff0055, #ff4081);
    
    /* 辅助色 */
    --secondary-color: #ff80ab;
    --accent-color: #00e5ff; /* 赛博蓝作为点缀 */
    
    /* 文字颜色：反转为浅色 */
    --text-color: #e0e0e0;
    --text-sub-color: #aaaaaa;
    
    /* 组件背景：卡片灰 */
    --card-bg: #1e1e1e;
    --input-bg: #2d2d2d;
    --border-color: #333333;
    
    /* 其它变量 */
    --white-color: #ffffff; /* 纯白仅用于高亮文字或图标 */
    --border-radius: 16px;
    --phone-corner-radius: 0px;
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    --top-pinned-bg: #1a1517; /* 置顶深红黑 */
    --online-status-color: #00e676;
    
    /* 阴影与光效 */
    --neon-glow: 0 0 10px rgba(255, 0, 85, 0.4);
    --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.5);
}

*, *::before, *::after { box-sizing: border-box; }

body {
    font-family: var(--font-family);
    margin: 0; padding: 0;
    /* 背景改为黑灰渐变 */
    background: linear-gradient(135deg, #0f0f0f, #232323);
    color: var(--text-color);
    display: flex; align-items: center; justify-content: center;
    min-height: 100vh;
}

.phone-screen {
    width: 100%; max-width: 420px;
    height: 100vh; max-height: 850px;
    background-color: var(--screen-bg);
    /* 增加粉色外发光，强调黑粉主题 */
    box-shadow: 0 0 0 2px #333, 0 0 30px rgba(0,0,0,0.8);
    border-radius: var(--phone-corner-radius);
    overflow: hidden; position: relative;
    display: flex; flex-direction: column;
}

/* 屏幕切换动画 */
.screen {
    display: none; 
    flex-direction: column;
    width: 100%; height: 100%;
    background-color: var(--screen-bg);
    animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
}
.screen.active { display: flex; }

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.98); filter: blur(2px); }
    to { opacity: 1; transform: scale(1); filter: blur(0); }
}

/* --- 顶部导航栏 (暗黑磨砂) --- */
.app-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 12px 20px;
    background-color: rgba(30, 30, 30, 0.85); /* 深色半透明 */
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0; position: relative; z-index: 10;
}

.app-header .back-btn, .app-header .action-btn {
    background: none; border: none;
    font-size: 24px; font-weight: bold;
    color: var(--secondary-color); /* 粉色按钮 */
    cursor: pointer; width: 40px; height: 40px;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.2s;
}
.app-header .back-btn:active, .app-header .action-btn:active { transform: scale(0.9); }

#cancel-multi-select-btn {
    font-size: 13px !important; font-weight: 600 !important;
    color: var(--white-color) !important; 
    background: var(--primary-gradient) !important;
    border-radius: 8px !important; padding: 6px 12px !important;
    width: auto !important; height: auto !important;
    box-shadow: var(--neon-glow);
}

.app-header .action-btn-group { display: flex; align-items: center; gap: 8px; }
.app-header .action-btn-group .action-btn {
    font-size: 15px; font-weight: 600; width: auto;
    padding: 6px 12px; border-radius: 8px;
}
.app-header .action-btn-group #create-group-btn { 
    background: var(--primary-gradient); 
    color: var(--white-color); 
    box-shadow: 0 2px 8px rgba(255, 0, 85, 0.3);
}
.app-header .action-btn-group #add-chat-btn { font-size: 30px; padding: 0; width: 40px; height: 40px; background: transparent; color: var(--secondary-color); border-radius: 50%; }
.app-header .action-btn img { width: 24px; height: 24px; filter: invert(80%); } /* 图标反白适应深色 */

.app-header .title-container {
    display: flex; flex-direction: column; align-items: center;
    text-align: center; position: absolute; left: 50%; transform: translateX(-50%);
}
.app-header .title { font-size: 17px; font-weight: 700; color: var(--white-color); margin: 0; letter-spacing: 0.5px; }
.app-header .subtitle { font-size: 11px; color: var(--text-sub-color); display: flex; align-items: center; margin-top: 3px; }
.online-indicator { width: 6px; height: 6px; border-radius: 50%; background-color: var(--online-status-color); margin-right: 5px; box-shadow: 0 0 5px var(--online-status-color); }
.app-header .placeholder { width: 40px; }

/* --- 主屏幕 (暗黑) --- */
#home-screen {
    justify-content: space-between; background-size: cover; background-position: center;
    transition: background-image 0.5s ease-in-out; padding: 60px 0;
    /* 如果没有背景图，默认黑色 */
    background-color: #000; 
}

.time-widget { text-align: center; padding: 0 20px; color: var(--white-color); }
.time-widget .time { 
    font-size: 80px; font-weight: 200; 
    text-shadow: 0 0 15px rgba(255,255,255,0.2); 
    font-variant-numeric: tabular-nums;
}
.time-widget .date { font-size: 16px; color: var(--secondary-color); font-weight: 500; letter-spacing: 1px; text-transform: uppercase; }

/* 无论什么模式，主屏文字都带阴影以适应壁纸 */
#home-screen .time-widget, #home-screen .time-widget .date, #home-screen .app-icon .app-name {
    color: var(--white-color); text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.app-grid {
    width: 100%; padding: 20px 30px; display: grid;
    grid-template-columns: repeat(3, 1fr); gap: 25px;
    justify-content: center; align-content: center; margin-top: 20px;
}

/* 底部 Dock 栏：悬浮深色条 */
.dock {
    display: flex; justify-content: center; align-items: center; padding: 12px;
    background-color: rgba(40, 40, 40, 0.7); backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 24px; margin: 0 15px 15px 15px; min-height: 85px; gap: 20px;
}

.app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; text-decoration: none; }
.icon-img {
    width: 58px; height: 58px; border-radius: 14px; margin-bottom: 8px;
    /* 图标增加一点暗色滤镜统一风格 */
    filter: brightness(0.9); 
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); 
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    object-fit: cover;
    background-color: #333; /* 图片加载前的背景 */
}
.app-icon:hover .icon-img { 
    transform: translateY(-8px) scale(1.05); 
    box-shadow: 0 8px 20px rgba(255, 0, 85, 0.3); /* 悬停粉色光 */
    filter: brightness(1.1);
}
.app-icon .app-name { font-size: 11px; color: var(--text-color); font-weight: 500; }

.content { flex-grow: 1; overflow-y: auto; padding: 20px; position: relative; background-color: var(--screen-bg); }
.placeholder-text { text-align: center; color: #666; margin-top: 50px; font-weight: 300; }

/* --- 模态框 (Dark Mode) --- */
.modal-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7); z-index: 100;
    display: none; align-items: center; justify-content: center;
    animation: fadeIn 0.3s ease;
    backdrop-filter: blur(3px);
}
.modal-overlay.visible { display: flex; }
.modal-window {
    background: var(--card-bg); padding: 25px;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius); 
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
    width: 85%; max-width: 340px; animation: slideUp 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    color: var(--text-color);
}
.modal-window h3 { margin-top: 0; text-align: center; color: var(--primary-color); border-bottom: 1px solid #333; padding-bottom: 10px; }

@keyframes slideUp {
    from { transform: translateY(40px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* 右键菜单 */
.context-menu {
    position: fixed; z-index: 1000; 
    background: #252525; border: 1px solid #444;
    border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    overflow: hidden; padding: 5px 0; animation: fadeIn 0.1s ease;
}
.context-menu-item { padding: 12px 24px; cursor: pointer; color: var(--text-color); font-size: 14px; transition: background 0.1s; }
.context-menu-item:hover { background-color: var(--primary-color); color: white; }
.context-menu-item.danger { color: #ff5252; }
.context-menu-item.danger:hover { background-color: #ff5252; color: white; }

/* 底部动作表 */
.action-sheet-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6); z-index: 200;
    display: none; align-items: flex-end; animation: fadeIn 0.3s ease;
}
.action-sheet-overlay.visible { display: flex; }
.action-sheet {
    background: #1a1a1a; width: 100%;
    border-top-left-radius: 20px; border-top-right-radius: 20px;
    padding: 15px; padding-bottom: calc(15px + env(safe-area-inset-bottom));
    animation: slideUp 0.3s cubic-bezier(0.19, 1, 0.22, 1);
    border-top: 1px solid #333;
}
.action-sheet-button {
    width: 100%; background: #2d2d2d; border: none; padding: 16px;
    font-size: 16px; color: var(--white-color); font-weight: 600;
    cursor: pointer; border-radius: 12px; margin-bottom: 10px;
    transition: background 0.2s;
}
.action-sheet-button:hover { background: #3d3d3d; }
.action-sheet-button.danger { color: #ff5252; background: rgba(255, 82, 82, 0.1); }
.action-sheet-button:last-child { margin-bottom: 0; background-color: transparent; border: 1px solid #444; }

/* --- 列表样式 --- */
#chat-list-screen .content, #world-book-screen .content { padding: 0; background-color: var(--screen-bg); }
.list-container { list-style: none; margin: 0; padding: 0; }
.list-item {
    display: flex; align-items: center; padding: 15px 20px; cursor: pointer;
    border-bottom: 1px solid #1a1a1a; transition: background-color 0.2s ease; position: relative;
    background-color: var(--screen-bg);
}
.list-item:hover { background-color: #111; }
.chat-item.pinned { background-color: var(--top-pinned-bg); border-left: 3px solid var(--primary-color); }
.chat-avatar { 
    width: 52px; height: 52px; border-radius: 50%; margin-right: 15px; 
    object-fit: cover; flex-shrink: 0; background-color: #333; 
    border: 2px solid #222;
}
.group-avatar { border-radius: 12px; }
.item-details { flex-grow: 1; overflow: hidden; }
.item-details-row { display: flex; justify-content: space-between; align-items: center; }
.item-name { font-weight: 600; color: var(--white-color); font-size: 16px; }
.item-preview-wrapper { display: flex; align-items: center; gap: 8px; margin-top: 5px; }
.item-preview { font-size: 14px; color: #888; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-grow: 1; }
.pin-badge { 
    background-color: #333; color: var(--primary-color); 
    font-size: 10px; font-weight: bold; padding: 3px 6px; 
    border-radius: 4px; white-space: nowrap; flex-shrink: 0; border: 1px solid var(--primary-color);
}

/* --- 聊天界面 --- */
#chat-room-screen { background-color: #121212; }
#chat-room-screen .content { display: flex; flex-direction: column; padding: 15px 12px; padding-bottom: 10px; transition: padding-bottom 0.3s ease; }
#chat-room-screen.multi-select-active .content { padding-bottom: 70px; }
.message-area { flex-grow: 1; overflow-y: auto; padding: 0 5px; scroll-behavior: smooth; }

.message-wrapper { display: flex; margin-bottom: 16px; align-items: flex-start; transition: background-color 0.2s; flex-direction: column; }
.message-wrapper.group-message { margin-bottom: 22px; }
.message-wrapper.sent { align-items: flex-end; }
.message-wrapper.received { align-items: flex-start; }
.message-wrapper.system-notification { align-items: center; margin: 20px 0; }
.message-bubble-row { display: flex; width: 100%; align-items: flex-start; }
.message-wrapper.sent .message-bubble-row { flex-direction: row-reverse; }
.message-wrapper.multi-select-selected { background-color: rgba(255, 0, 85, 0.15); border-radius: var(--border-radius); padding: 5px; margin-left: -5px; margin-right: -5px; width: calc(100% + 10px); }

.message-info { display: flex; flex-direction: column; align-items: center; position: relative; }
.group-nickname { position: absolute; top: -18px; font-size: 10px; color: #777; white-space: nowrap; width: 70px; text-align: center; overflow: hidden; text-overflow: ellipsis; }
.message-avatar { width: 38px; height: 38px; border-radius: 50%; object-fit: cover; border: 1px solid #333; }
.message-time { font-size: 9px; color: #666; margin-top: 4px; }

/* 气泡样式 */
.message-bubble {
    max-width: 270px; padding: 10px 14px; border-radius: 18px;
    word-wrap: break-word; line-height: 1.5; 
    margin: 0 10px; cursor: pointer; font-size: 15px;
    position: relative;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.message-bubble.sent { 
    /* 发送方：热粉渐变 */
    background: var(--primary-gradient);
    color: white; 
    border-bottom-right-radius: 4px; 
}
.message-bubble.received { 
    /* 接收方：深灰卡片色 */
    background-color: var(--card-bg);
    color: var(--text-color);
    border: 1px solid #333;
    border-bottom-left-radius: 4px; 
}
.system-notification-bubble { 
    background-color: rgba(40, 40, 40, 0.8); color: #999; 
    font-size: 11px; padding: 4px 12px; border-radius: 12px; 
    text-align: center; border: 1px solid #333;
}

/* 特殊消息气泡 */
.image-bubble {
    max-width: 140px; border-radius: var(--border-radius); margin: 0 10px; padding: 0;
    background: transparent; box-shadow: none;
    cursor: pointer; overflow: hidden;
}
.image-bubble img { width: 100%; height: auto; display: block; border-radius: 12px; border: 1px solid #333; }
.voice-bubble {
    display: flex; align-items: center; justify-content: space-between; padding: 10px 14px;
    border-radius: 18px; margin: 0 10px;
    cursor: pointer; min-width: 100px; max-width: 220px;
}
.message-wrapper.sent .voice-bubble { background: var(--primary-gradient); color: white; }
.message-wrapper.received .voice-bubble { background-color: var(--card-bg); color: var(--text-color); border: 1px solid #333; }

.voice-bubble .play-icon { width: 18px; height: 18px; flex-shrink: 0; fill: currentColor; }
.voice-bubble .duration { font-size: 13px; margin: 0 8px; white-space: nowrap; font-weight: 600; }
.voice-transcript {
    font-size: 13px; color: #bbb; background-color: #2a2a2a;
    padding: 8px 12px; margin: 6px 54px 0; border-radius: 8px; line-height: 1.5;
    max-width: calc(100% - 108px); display: none; border-left: 2px solid var(--primary-color);
}
.voice-transcript.active { display: block; }
.message-wrapper.sent .voice-transcript { margin-right: 54px; margin-left: auto; }
.message-wrapper.received .voice-transcript { margin-left: 54px; margin-right: auto; }

/* 卡片样式 (PV, Gift, Transfer) - 适配 Dark Mode */
.pv-card { 
    width: 230px; aspect-ratio: 1/1; background-color: var(--card-bg); 
    border-radius: 18px; box-shadow: var(--shadow-soft); 
    overflow: hidden; position: relative; cursor: pointer; margin: 0 10px; border: 1px solid #333;
}
.pv-card-image-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background-size: cover; background-position: center; transition: opacity 0.5s; z-index: 2; }
.pv-card-image-overlay.hidden { opacity: 0; pointer-events: none; }
.pv-card-content { padding: 15px; height: 100%; overflow-y: auto; color: var(--text-color); font-size: 14px; background: var(--card-bg); z-index: 1; }
.pv-card-footer { background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); color: white; padding: 25px 12px 10px; font-size: 12px; display: flex; align-items: center; gap: 5px; position: absolute; bottom: 0; width: 100%; z-index: 3; pointer-events: none; transition: opacity 0.5s; }
.pv-card-footer.hidden { opacity: 0; }
.pv-card-footer svg { width: 14px; height: 14px; fill: var(--primary-color); }

.transfer-card { 
    width: 240px; border-radius: 18px; margin: 0 10px; 
    overflow: hidden; position: relative; box-shadow: var(--shadow-soft); color: white; 
}
.transfer-card::before { content: ''; position: absolute; top:0; left:0; right:0; bottom:0; background: linear-gradient(135deg, #FF6F00, #FF8F00); z-index: 1; }
.transfer-card .overlay { position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.2); z-index: 2; }
.transfer-card.received .overlay { background: rgba(0,0,0,0.5); }
.transfer-content { position: relative; z-index: 3; padding: 20px; }
.transfer-amount { font-size: 26px; font-weight: bold; margin: 0; }
.transfer-remark { font-size: 13px; margin-top: 8px; opacity: 0.9; }
.transfer-status { font-size: 11px; margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.3); opacity: 0.8; }

.gift-card { 
    width: 230px; background-color: var(--card-bg); 
    border: 1px solid #ff0055; /* 礼物卡粉色边框 */
    border-radius: 18px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
    padding: 12px; display: flex; align-items: center; cursor: pointer; margin: 0 10px; position: relative; overflow: hidden; 
}
.gift-card-icon { width: 45px; height: 45px; margin-right: 12px; flex-shrink: 0; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
.gift-card-text { font-size: 15px; font-weight: bold; color: var(--white-color); }
.gift-card-description { font-size: 13px; color: #999; background: #222; padding: 8px 12px; margin: 6px 54px 0; border-radius: 8px; display: none; }
.gift-card-description.active { display: block; }
.gift-card-received-stamp { position: absolute; top: 5px; right: 5px; font-size: 14px; font-weight: bold; color: var(--primary-color); border: 2px solid var(--primary-color); border-radius: 8px; padding: 2px 6px; transform: rotate(15deg); opacity: 0; background: rgba(0,0,0,0.5); }
.gift-card.received .gift-card-received-stamp { opacity: 1; }

.load-more-btn { background-color: #333; color: #aaa; border: 1px solid #444; padding: 8px 16px; margin: 10px auto; border-radius: 15px; cursor: pointer; display: block; font-size: 12px; transition: all 0.2s; }
.load-more-btn:hover { background-color: #444; color: white; }
.typing-indicator { text-align: center; color: var(--primary-color); font-style: italic; font-size: 12px; padding: 8px 0; display: none; }

/* --- 底部输入区域 --- */
#sticker-bar { 
    flex-shrink: 0; padding: 5px 10px; display: flex; align-items: center; 
    background: rgba(30, 30, 30, 0.9); backdrop-filter: blur(10px); 
    border-top: 1px solid #333;
}
.sticker-bar-btn { background: none; border: none; padding: 6px; cursor: pointer; border-radius: 8px; }
.sticker-bar-btn:hover { background-color: rgba(255, 255, 255, 0.1); }
.sticker-bar-btn svg { width: 24px; height: 24px; fill: #aaa; }
#sticker-modal { 
    position: absolute; bottom: 0; left: 0; right: 0; height: 35%; max-height: 250px; 
    background: #1a1a1a; border-top-left-radius: 20px; border-top-right-radius: 20px; 
    box-shadow: 0 -5px 20px rgba(0,0,0,0.5); z-index: 25; display: none; flex-direction: column; 
    border-top: 1px solid #333;
}
#sticker-modal.visible { display: flex; animation: slideUp 0.3s ease-out; }
#sticker-modal .header { padding: 12px 15px; font-weight: bold; color: var(--text-color); border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
.sticker-grid { flex-grow: 1; overflow-y: auto; padding: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); gap: 15px; }
.sticker-item img { width: 60px; height: 60px; object-fit: contain; transition: transform 0.2s; }
.sticker-item:hover img { transform: scale(1.1); }

.chat-input-wrapper { flex-shrink: 0; background-color: var(--screen-bg); }
.message-input-area { 
    display: flex; align-items: center; padding: 10px 15px; 
    padding-bottom: calc(10px + env(safe-area-inset-bottom)); 
    border-top: 1px solid #2a2a2a; 
    background: rgba(30, 30, 30, 0.95); backdrop-filter: blur(10px); gap: 12px; 
}
.message-input-area input { 
    flex-grow: 1; border: 1px solid #444; padding: 12px 15px; 
    border-radius: 20px; background-color: #222; color: white;
    font-size: 15px; transition: border-color 0.2s;
}
.message-input-area input:focus { outline: none; border-color: var(--primary-color); background-color: #2a2a2a; }
.icon-btn { 
    background: transparent; color: var(--primary-color); 
    border: 1px solid var(--primary-color); border-radius: 50%; 
    width: 38px; height: 38px; cursor: pointer; 
    display: flex; align-items: center; justify-content: center; 
    transition: all 0.2s;
}
.icon-btn:hover { background: var(--primary-color); color: white; box-shadow: 0 0 10px var(--primary-color); }
.icon-btn svg { width: 18px; height: 18px; fill: currentColor; }

#multi-select-bar { 
    position: absolute; bottom: 0; left: 0; width: 100%; 
    background: rgba(30, 30, 30, 0.95); backdrop-filter: blur(10px); 
    display: none; justify-content: space-between; align-items: center; 
    padding: 15px 20px; padding-bottom: calc(15px + env(safe-area-inset-bottom)); 
    border-top: 1px solid var(--primary-color); z-index: 20; animation: slideUp 0.3s ease-out; 
}
#multi-select-bar.visible { display: flex; }

/* --- 侧边栏设置 --- */
.settings-sidebar { 
    position: absolute; top: 0; right: -100%; width: 85%; height: 100%; 
    background: #181818; box-shadow: -10px 0 30px rgba(0,0,0,0.5); 
    transition: right 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); z-index: 101; 
    display: flex; flex-direction: column; 
    border-left: 1px solid #333;
}
.settings-sidebar.open { right: 0; }
.settings-sidebar .header { 
    padding: 18px; border-bottom: 1px solid #333; 
    font-weight: bold; text-align: center; color: var(--white-color); 
    background-color: #222;
}
.settings-sidebar .content { padding: 25px; overflow-y: auto; flex-grow: 1; color: var(--text-color); }

.form-group { margin-bottom: 24px; }
.form-group label { display: block; margin-bottom: 8px; color: var(--secondary-color); font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; }
.form-group input, .form-group select, .form-group textarea { 
    width: 100%; padding: 12px; border: 1px solid #444; 
    border-radius: 10px; background: #2d2d2d; color: white;
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(255, 0, 85, 0.2); }

.btn { width: 100%; padding: 14px; border-radius: 10px; border: none; font-size: 15px; font-weight: bold; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; text-align: center; margin-top: 10px; }
.btn-primary { background: var(--primary-gradient); color: white; box-shadow: 0 4px 15px rgba(255, 0, 85, 0.3); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 0, 85, 0.4); }
.btn-secondary { background: transparent; border: 1px solid var(--secondary-color); color: var(--secondary-color); margin-bottom: 15px; }
.btn-secondary:hover { background: rgba(255, 128, 171, 0.1); }
.btn-neutral { background: #444; color: white; }
.btn-danger { background: rgba(239, 83, 80, 0.2); color: #ef5350; border: 1px solid #ef5350; }

.btn .spinner { display: none; width: 16px; height: 16px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; }
.btn.loading .spinner { display: block; } .btn.loading .btn-text { display: none; }
@keyframes spin { to { transform: rotate(360deg); } }

.toast { position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 12px 24px; border-radius: 30px; font-size: 14px; opacity: 0; visibility: hidden; transition: 0.5s; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); border: 1px solid #444; display: flex; align-items: center; gap: 8px; }
.toast.show { opacity: 1; visibility: visible; bottom: 90px; }

/* 教程与杂项 */
.tutorial-item { margin-bottom: 15px; border: 1px solid #333; border-radius: 12px; overflow: hidden; background-color: #222; }
.tutorial-header { padding: 14px 18px; font-weight: 600; color: var(--white-color); cursor: pointer; display: flex; justify-content: space-between; align-items: center; background-color: #2a2a2a; }
.tutorial-header::after { content: '▼'; font-size: 10px; color: #666; transition: transform 0.3s ease; }
.tutorial-item.open .tutorial-header::after { transform: rotate(180deg); color: var(--primary-color); }
.tutorial-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, padding 0.5s ease; padding: 0 15px; color: #aaa; font-size: 14px; line-height: 1.6; }
.tutorial-item.open .tutorial-content { padding: 15px; max-height: 5000px; border-top: 1px solid #333; }
.tutorial-content img { width: 100%; height: auto; border-radius: 8px; display: block; margin: 10px 0; border: 1px solid #444; }

/* 复选框列表 */
.member-selection-item, .world-book-select-item, .invite-member-select-item, .group-recipient-select-item { 
    display: flex; align-items: center; padding: 12px 5px; 
    border-bottom: 1px solid #2a2a2a; color: var(--text-color); 
}
.member-selection-item:last-child { border-bottom: none; }
.member-selection-item img, .invite-member-select-item img, .group-recipient-select-item img { width: 42px; height: 42px; border-radius: 50%; object-fit: cover; margin-right: 12px; border: 1px solid #333; }
input[type="checkbox"] { 
    margin-right: 15px; width: 20px; height: 20px; accent-color: var(--primary-color); 
    background-color: #333; border: 1px solid #555;
}

/* 自定义头像预览区 */
.icon-custom-item { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333; }
.icon-preview { width: 50px; height: 50px; border-radius: 12px; object-fit: cover; border: 1px solid #444; }
.avatar-preview, .group-avatar-preview { 
    width: 70px; height: 70px; border-radius: 50%; object-fit: cover; 
    border: 2px dashed var(--primary-color); cursor: pointer; padding: 2px;
    background-color: #222; transition: all 0.2s;
}
.avatar-preview:hover, .group-avatar-preview:hover { border-style: solid; box-shadow: 0 0 10px rgba(255, 0, 85, 0.3); }
.group-avatar-preview { border-radius: 14px; }